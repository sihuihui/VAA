---
title: "Take-home Exercise 2"
author: "Goh Si Hui"
date: 2024/01/25
date-format: long
date-modified: "last-modified"
format: html 
execute: 
  echo: true
  eval: true
  warning: false
editor: visual 
---

# About this Exercise 

In this take-home exercise, I will be using the data visualisation design principles and best practices learnt in ISSS608 Lesson 1 and 2 to improve on my peer's visualisations. 

# Getting Started 

First, let us ensure that the required R packages have been installed and import the relevant data for this exercise.

## Loading R packages

For this exercise, we will be using the following packages:

-   [**tidyverse**](https://www.tidyverse.org/) : to load the core tidyverse packages, which includes ggplot2 and dplyr.

-   [**haven**](https://haven.tidyverse.org/) : to read and write various data formats used by other statistical packages by wrapping the ReadStat C library. It is part of the tidyverse family too! **haven** currently supports SAS, SPSS and Stata. We will need **haven** to import the PISA 2022's student questionnaire data file because it is in SAS file type.

-   [**patchwork**](https://patchwork.data-imaginist.com/): to create composition of ggplot2 plots using arithmetic operators.

-   [**ggrepel**:](https://ggrepel.slowkow.com/) to repel overlapping text labels away from each other.

-   [**ggdist**](https://mjskay.github.io/ggdist/): provides stats and geoms for visualising distributions and uncertainty.

-   [**ggridges**](https://cran.r-project.org/web/packages/ggridges/vignettes/introduction.html): provides geoms to plot ridgeline plots, which are partially overlapping line plots that create the impression of a mountain range.

-   [**knitr**](https://github.com/yihui/knitr): provides a general-purpose tool for dynamic report generation in R. We will use this to mainly help us generate simple tables.

The code chunk below uses `p_load()` of [**pacman**](https://trinker.github.io/pacman/vignettes/Introduction_to_pacman.html) package to check if the abovementioned packages are installed in the computer. If they are, they will be launched in R. Otherwise, **pacman** will install the relevant packages before launching them.

```{r}
#| code-fold: true
#| code-summary: "Show the code"

pacman::p_load(tidyverse, haven, patchwork, ggrepel, ggdist, ggridges, knitr, hrbrthemes)
```

## Importing Data into R 
For this exercise, we are using [PISA 2022 database](https://www.oecd.org/pisa/data/2022database/)'s student questionnaire data file, which is the same dataset as Take-home exercise 1. As we have already filtered out the PISA data from Singapore and saved it in rds file previously in Take-home exercise 1, let us import the rds file using the following code chunk. 

```{r}
#| code-fold: true
#| code-summary: "Show the code"

stu_qqq_SG <- read_rds("data/stu_qqq_SG.rds")

```


# Data Preparation
Before I can critque and remake my peer's charts, I followed the data preparation steps taken by my peer. 

```{r}

stu_qqq_SG_filtered <- stu_qqq_SG %>%
  select_if(function(x) !all(x == x[1]))


stu_qqq_SG_filtered <- stu_qqq_SG_filtered %>%
  mutate(
    MATH_Score = rowMeans(select(., PV1MATH:PV10MATH), na.rm = TRUE),
    READ_Score = rowMeans(select(., PV1READ:PV10READ), na.rm = TRUE),
    SCIE_Score = rowMeans(select(., PV1SCIE:PV10SCIE), na.rm = TRUE)
  )

stu_qqq_SG_filtered <- stu_qqq_SG_filtered %>%
  mutate(Gender = ifelse(ST004D01T == 1, "Female", "Male"))

stu_qqq_SG_filtered <- stu_qqq_SG_filtered %>%
  mutate(CNTSCHID = as.character(CNTSCHID))


```

As the charts that we will be re-creating only uses the selected columns, we will also drop the columns that we will not be using for this exercise. 

```{r}

stu <- stu_qqq_SG_filtered %>% 
  select(CNTSTUID,CNTSCHID, Gender, MATH_Score, READ_Score, SCIE_Score, ESCS)
```


# Data Visualisation Critique 

## Chart 1: Comparison of Scores Amongst Students 

### Critique 

### Proposed Sketch  

### Makeover Design 


## Chart 2: Comparison of Scores Between Gender

### Critique 

### Proposed Sketch  

### Makeover Design 


## Chart 3: Comparison of Scores Between Schools

### Critique 

### Proposed Sketch  

### Makeover Design 


## Chart 4: Comparison of Scores with Students' socioeconomic status

### Critique 

### Proposed Sketch  

### Makeover Design 

